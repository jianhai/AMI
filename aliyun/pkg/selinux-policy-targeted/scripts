preinstall scriptlet (using /bin/sh):

if [ -s /etc/selinux/config ]; then 
     . /etc/selinux/config; 
     FILE_CONTEXT=/etc/selinux/targeted/contexts/files/file_contexts; 
     if [ "${SELINUXTYPE}" = targeted -a -f ${FILE_CONTEXT} ]; then 
        [ -f ${FILE_CONTEXT}.pre ] || cp -f ${FILE_CONTEXT} ${FILE_CONTEXT}.pre; 
     fi 
fi
postinstall scriptlet (using /bin/sh):
packages=`cat /usr/share/selinux/targeted/modules.lst`
if [ $1 -eq 1 ]; then
   
. /etc/selinux/config; 
( cd /usr/share/selinux/targeted; 
semodule -n -r oracle-port -b base.pp.bz2 -i $packages -s targeted 2>&1 | grep -v "oracle-port"; 
[ "${SELINUXTYPE}" == "targeted" ] && selinuxenabled && load_policy; 
);   restorecon -R /root /var/log /var/run 2> /dev/null
else
   semodule -n -s targeted -r moilscanner -r mailscanner -r gamin -r audio_entropy -r iscsid -r polkit_auth -r polkit -r rtkit_daemon -r ModemManager -r telepathysofiasip -r passanger -r rgmanager -r aisexec -r corosync -r pacemaker -r amavis -r clamav 2>/dev/null
   
. /etc/selinux/config; 
( cd /usr/share/selinux/targeted; 
semodule -n -r oracle-port -b base.pp.bz2 -i $packages -s targeted 2>&1 | grep -v "oracle-port"; 
[ "${SELINUXTYPE}" == "targeted" ] && selinuxenabled && load_policy; 
);   
. /etc/selinux/config; 
FILE_CONTEXT=/etc/selinux/targeted/contexts/files/file_contexts; 
selinuxenabled; 
if [ $? = 0  -a "${SELINUXTYPE}" = targeted -a -f ${FILE_CONTEXT}.pre ]; then 
     fixfiles -C ${FILE_CONTEXT}.pre restore 2> /dev/null; 
     restorecon -R /root /var/log /var/run 2> /dev/null; 
     rm -f ${FILE_CONTEXT}.pre; 
fi;fi
exit 0
